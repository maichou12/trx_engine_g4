#!/bin/bash

# Script de vÃ©rification de santÃ© pour Keycloak
# VÃ©rifie si Keycloak est prÃªt Ã  recevoir des requÃªtes

echo "ğŸ” VÃ©rification de l'Ã©tat de Keycloak..."

# Essayer de se connecter Ã  l'endpoint de santÃ© de Keycloak
if curl -s -f "http://localhost:9990/health/ready" > /dev/null; then
    echo "âœ… Keycloak est prÃªt !"
    exit 0
else
    echo "â³ Keycloak n'est pas encore prÃªt..."
    # Afficher plus d'infos en cas d'Ã©chec
    curl -s "http://localhost:9990/health/ready" || echo "Impossible de contacter Keycloak"
    exit 1
fi